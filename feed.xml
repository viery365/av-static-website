<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog Name</title>
  <subtitle>Blog subtitle</subtitle>
  <id>http://blog.url.com/</id>
  <link href="http://blog.url.com/"/>
  <link href="http://blog.url.com/feed.xml" rel="self"/>
  <updated>2017-10-02T01:00:00+01:00</updated>
  <author>
    <name>Blog Author</name>
  </author>
  <entry>
    <title>The pilot+copilot organizational pattern</title>
    <link rel="alternate" href="http://blog.url.com/2017/10/02/pilot-copilot-organizational-pattern/"/>
    <id>http://blog.url.com/2017/10/02/pilot-copilot-organizational-pattern/</id>
    <published>2017-10-02T01:00:00+01:00</published>
    <updated>2017-10-04T21:52:30+01:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;img alt="pair flying" src="/images/pairflying.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;In 2002, I graduated a distance-learning masters in applied mathematics. Every month, the university mailed me an A4 enveloppe containing the course support. I was supposed to learn from the course material and returned the completed assignments within a month. A month later, I would receive an answer key. Should I have a question, I could mail it to the professor and wait for his reply. The whole process was cumbersome. I was often behind schedule. Interactivity was near to zero. &lt;/p&gt;

&lt;p&gt;Later on, I participated in the MOOC endeavour. The video of the instructor gave a feeling of a one-to-one training session. Discussion forums, deadlines, follow-up mails, peer-reviews grounded the learning process. There were meetups too. And a MOOC about Agile Development using Ruby On Rails offered remote pair-programming sessions between participants. &lt;/p&gt;

&lt;p&gt;Pair-programmming reuses the rather old organizational pattern of pilot+copilot : double-check, higher focusing, external view, and stronger engagement. You may object that programming is very different from flying. Yes, it is! &lt;/p&gt;

&lt;p&gt;But programming requires a strong level of accuracy too. Your pairing fellow is both a watch dog that tells you not to call a library without checking how it works, not to cut and paste code across your work, and an inspiration to experiment with new ways of coding. As some aerobatic aircrafts don&amp;rsquo;t include a copilot seat, some programs are implemented by lone wolves in the wild.&lt;/p&gt;

&lt;p&gt;Tools like teamviewer, logmein, skype, hangout or joinme have been instrumental to the success of remote pair working. There is still room for improvement:&lt;/p&gt;

&lt;p&gt;1) In a face-to-face meeting, there is a desk between the two interlocutors. Webcams should recreate this confortable spacing. I&amp;rsquo;m neither a barber nor a dental professional!
2) Remote working platforms lack of interoperability. Some only run on Windows, some require to install a software, others are more suitable for mobile use&amp;hellip; and don&amp;rsquo;t try to connect to hangout with skype
3) Security is a weak point for all of these platforms. Choosing which window you share, which you don&amp;rsquo;t, masking your passwords or your personal information are not intuitive. In my earlier days, I remembered displaying my passwords on a recorded session. Not so good a security practice!
4) Optimizing the screen definition so that everybody can watch comfortably is not supported either.&lt;/p&gt;

&lt;p&gt;Every desktop application from IDE to word processors will probably include some kind of remote pair working feature sooner or later. C9 already includes some simple pair-programming features, for instance.  &lt;/p&gt;

&lt;p&gt;Bugs in the code? Don&amp;rsquo;t blame me, it&amp;rsquo;s my pair programming partner who fooled around!&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Another free refill?</title>
    <link rel="alternate" href="http://blog.url.com/2017/09/22/another-free-refill/"/>
    <id>http://blog.url.com/2017/09/22/another-free-refill/</id>
    <published>2017-09-22T01:00:00+01:00</published>
    <updated>2017-09-27T21:07:18+01:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;img alt="free refill" src="/images/freerefill.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;Earlier this year, I undertook a training session targeting small business manager to teach them how to improve profitability of business projects. The course instructor showed us a rather clear way to deal with profitabiliy. First, you estimate your break-even hourly rate, based on your history. Then, you don&amp;rsquo;t sell any project under the bottom line. After that, you prioritize your work to put the highest priority on the most profitable projects. Finally, you keep any accepted project above the bottom line. &lt;/p&gt;

&lt;p&gt;The idea is quite simple. It&amp;rsquo;s all down to the execution. I began to schedule my workday according to business priorities preferably to a sense of urgency that overcame me before. Then, everytime I felt I was at risk to hit the bottom line, I shifted my attention towards what I really sold to the client annd I reduced my objectives accordingly. Finally, I was trying to become a project reviewer for a well known MOOC platform. But the hourly rate was much too low. I felt relief to drop my candidature. Paid projects management improved greatly. But, a significant part of my workday, dedicated to volunteer projects, was out of the scope of this effort.  &lt;/p&gt;

&lt;p&gt;Too many commitments, workaholism, things we begin and we never achieve, any freelance worker faces these contradictions. The inherent contradiction is even stronger when you work on non-paid project. How to prioritize your volunteer works?&lt;/p&gt;

&lt;p&gt;Ten working hours a day is my upper limit, considering that I&amp;rsquo;m not a computer nerd, I&amp;rsquo;ve got a family, hobbies, and a social life &amp;hellip; I was already busy ten hours a day. Adding anything to my schedule implied removing something else. I have been more or less active on professional social networks for three years. I first thought this commitment would improve my reputation and fuel my prospect pipeline. But in three years, the return was not very encouraging. I felt that my social network activity was fueled by bitterness or anxiety or ego or the three rather than by a clear sense of business opportunity! I decided to forget social networks. Two to three hours a week were freed thanks to this good resolution.&lt;/p&gt;

&lt;p&gt;I chose to devote these hours to Agile Venture mob programming sessions. It&amp;rsquo;s a real community, with real developers. You can both learn by observing how skilled developers work and by doing things by yourself. &lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m still in the midstream of my prioritization effort. I&amp;rsquo;ve been very actively participating in MOOCs for five years. My skills greatly improved as a result of this effort.  But choosing which courses to invest on is not easy. Knowledge is a bit like indirects costs. You don&amp;rsquo;t really know how to assign it to your achievements. During the first years, the offer flourished. I tried many courses, from Economy to Computer Sciences. I progressively focused on Computer Science and left courses as they switched to paid offers. &lt;/p&gt;

&lt;p&gt;As I was giving up, a prominent MOOC platform offers me to beta-test courses for free. Free refill is the end of resolution and the beginning of passive hyperactivity! You may begin your training week with a course on Embedded systems and end, on friday, with a course on PythonML on friday, without completing any. Does it make sense to participate in a mob programming session about RSPEC on monday, another one about phoenix on wednesday, on the last one about React on friday, when you only need to develop a small web app with React?&lt;/p&gt;

&lt;p&gt;AgileVenture Premium Mob includes some kind of Professional Development Planning Support. I may ask the team to help me clean my training plan. But I&amp;rsquo;m still afraid they will tell me to stop learning Tensor Flow or the nitty gritty of Intel Parallel Architecture if I don&amp;rsquo;t have any prospect to work in these fields in the next year! &lt;/p&gt;
</content>
  </entry>
  <entry>
    <title/>
    <link rel="alternate" href="http://blog.url.com/2017/09/21/av-ecosystem-review-cocoon-home-straight/"/>
    <id>http://blog.url.com/2017/09/21/av-ecosystem-review-cocoon-home-straight/</id>
    <published>2017-09-21T01:00:00+01:00</published>
    <updated>2017-11-21T21:07:29+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;title: AV EcoSystem Review Cocoon Home Straight
date: 2017-09-21
tags: &lt;/p&gt;

&lt;h2&gt;author: Sam Joseph&lt;/h2&gt;

&lt;p&gt;&lt;img alt="home straight" src="/images/Home_Straight.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;So the answer to my question of yesterday, &amp;ldquo;Why is Acceptance Testing so hard&amp;rdquo; is that any coding is hard when you can&amp;rsquo;t get error messages.  The remote debug inspector I set up yesterday allowed me to see that our Capybara/Poltergeist/PhantomJS setup could not handle ES6 string interpolations.  It raises the question about why not, but I want to push on with this feature.&lt;/p&gt;

&lt;p&gt;The test is now failing on this error:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;    And I should see a link to "multiple repo project" on github            # features/step_definitions/projects_steps.rb:84
      undefined method `split' for nil:NilClass (NoMethodError)
      ./features/step_definitions/projects_steps.rb:86:in `/^I (should not|should) see a link to "(.*?)" on github$/'
      features/projects/create_projects.feature:84:in `And I should see a link to "multiple repo project" on github'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;because the GitHub URL is being stored in a new location that&amp;rsquo;s not reflected in the project page.  The project page currently shows the GitHub link via this code:&lt;/p&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;span&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"small"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="vi"&gt;@project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;github_url&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;last&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; "&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="vi"&gt;@project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;github_url&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;on GitHub&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which explains the error in the test.  Just to see if it worked I threw the following into the project model:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;github_url&lt;/span&gt;
    &lt;span class="n"&gt;source_repositories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;first&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;url&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and I was rewarded with a completely passing acceptance test.  However I have various issues to address:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;the acceptance test does not check that the second repo has been stored&lt;/li&gt;
&lt;li&gt;the acceptance test is not very readable&lt;/li&gt;
&lt;li&gt;the project page does not currently display all the repos&lt;/li&gt;
&lt;li&gt;the project has various unit tests based on being able to set the github_url&lt;/li&gt;
&lt;li&gt;the project model validates the URL&lt;/li&gt;
&lt;li&gt;the process for safely migrating the existing data on production&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;and maybe others I haven&amp;rsquo;t thought of yet, so I&amp;rsquo;m tempted to run the other project acceptance tests and see what breaks &amp;hellip; other acceptance tests are breaking because the create project form has changed and they can&amp;rsquo;t now find the form fields they expect.  I updated a few label strings in the tests and that project code to:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;github_url&lt;/span&gt;
    &lt;span class="n"&gt;source_repositories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;first&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;try&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and all the project &amp;ldquo;create&amp;rdquo; acceptance tests are green; so I kick off a run of the rest of the project acceptance tests.  Am I being bad here?  Shouldn&amp;rsquo;t I be clearly setting out my domain model and getting all my unit tests in place first?  My defense is that I&amp;rsquo;m sidling up on that, trying to use the existing tests from the outside in to give me the bigger picture here.  I very definitely don&amp;rsquo;t plan to just hack the app code until all the acceptance tests pass :-)&lt;/p&gt;

&lt;p&gt;I get the project &amp;ldquo;show&amp;rdquo; acceptance tests to pass with the following changed step definition:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="no"&gt;Given&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/^the following projects exist:$/&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;table&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
  &lt;span class="n"&gt;table&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;hashes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:author&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nf"&gt;present?&lt;/span&gt;
      &lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find_by_first_name&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:author&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
      &lt;span class="n"&gt;project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;except&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'author'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'tags'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;user_id: &lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;id&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;default_test_author&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;projects&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;except&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'author'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'tags'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:github_url&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nf"&gt;present?&lt;/span&gt;
      &lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;source_repositories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;url: &lt;/span&gt;&lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:github_url&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# &amp;lt;-- change here&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:tags&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
      &lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;tag_list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:tags&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="ss"&gt;parse: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;save!&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and the project &amp;ldquo;edit&amp;rdquo; acceptance failures look pretty much like form field names just need to be changed, but actually the step definition needs a further change, specifically:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:github_url&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nf"&gt;present?&lt;/span&gt;
      &lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;source_repositories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;url: &lt;/span&gt;&lt;span class="nb"&gt;hash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:github_url&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;source_repositories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;build&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;to ensure the projects created in the background steps have the default single source repository when they start up; and with that I have all the project acceptance tests green.  Now I attack the RSpec unit and integration tests, where I expect a slew of failures that should push me towards updating the domain model effectively.&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;→ be rspec spec/models/project_spec.rb 
[Coveralls] Using SimpleCov's 'rails' settings.

Randomized with seed 60909
.F...F...F....F...........

Failures:

  1) Project#github_repo returns the proper repo name if github url exists
     Failure/Error: expect(project.github_repo).to eq 'AgileVentures/WebsiteOne'

       expected: "AgileVentures/WebsiteOne"
            got: ""

       (compared using ==)
     # ./spec/models/project_spec.rb:131:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  2) Project#github_repo_user_name deals with hyphen gracefully
     Failure/Error: expect(subject.github_repo_user_name).to eq 'shf-project'

       expected: "shf-project"
            got: ""

       (compared using ==)
     # ./spec/models/project_spec.rb:145:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  3) Project#save should throw error for incomplete github url
     Failure/Error: expect{ subject.github_repo_name }.to raise_error(NoMethodError, "undefined method `[]' for nil:NilClass")
       expected NoMethodError with "undefined method `[]' for nil:NilClass" but nothing was raised
     # ./spec/models/project_spec.rb:38:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  4) Project#save should not accept invalid github url
     Failure/Error: expect(subject).to_not be_valid
       expected #&amp;lt;Project id: 1020, title: "Title 19", description: "Warp fields stabilize.", status: "We feel your presence.", created_at: nil, updated_at: nil, user_id: nil, slug: "title-19", github_url: "https:/github.com/google/instant-hangouts", pivotaltracker_url: nil, pitch: "'I AM the greatest!' - M. Ali", commit_count: 0, image_url: nil, last_github_update: nil&amp;gt; not to be valid
     # ./spec/models/project_spec.rb:33:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

Finished in 0.65807 seconds (files took 8.4 seconds to load)
26 examples, 4 failures

Failed examples:

rspec ./spec/models/project_spec.rb:129 # Project#github_repo returns the proper repo name if github url exists
rspec ./spec/models/project_spec.rb:144 # Project#github_repo_user_name deals with hyphen gracefully
rspec ./spec/models/project_spec.rb:36 # Project#save should throw error for incomplete github url
rspec ./spec/models/project_spec.rb:31 # Project#save should not accept invalid github url
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;let&amp;rsquo;s take these in turn.  The first failing spec is&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;    it 'returns the proper repo name if github url exists' do
      project = build_stubbed(:project, github_url: 'https://github.com/AgileVentures/WebsiteOne')
      expect(project.github_repo).to eq 'AgileVentures/WebsiteOne'
    end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which I adjusted  to:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;    it 'returns the proper repo name if github url exists' do
      project = build_stubbed(:project)
      project.source_repositories.create(url: 'https://github.com/AgileVentures/WebsiteOne')
      expect(project.github_repo).to eq 'AgileVentures/WebsiteOne'
    end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and then passes, and I assume we&amp;rsquo;re not &lt;a href="https://robots.thoughtbot.com/use-factory-girls-build-stubbed-for-a-faster-test"&gt;hitting the database&lt;/a&gt;.  Using other similar fixes I have all the project specs passing, so I guess I&amp;rsquo;ll run all the other specs to see if there are any other angles I&amp;rsquo;m missing.  The other thing that occurs to me is that we should have some specs for the new SourceRepository model.  I&amp;rsquo;m also unsure of the namings.  Should I have called it GitHubUrl or GitHubLink?  Does it matter?  I&amp;rsquo;d love us to be able to support BitBucket and other source repositories in the future &amp;hellip; anyhow, running the rest of the specs shows me that we&amp;rsquo;ve got a few more issues:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;Failures:

  1) GithubCommitsJob.job stores total commit count only for projects that have a github_url
     Failure/Error: expect(project.commit_count).to be &amp;gt; 1

       expected: &amp;gt; 1
            got:   0
     # ./spec/jobs/github_commits_job_spec.rb:28:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  2) GithubCommitsJob.job stores commit counts only for users that have a github_profile_url
     Failure/Error: expect(project.commit_counts.map(&amp;amp;:user)).to match_array(@users_with_github_profile_urls)

       expected collection contained:  [#&amp;lt;User id: 3, email: "trey@howe.co", encrypted_password: "$2a$04$plCVt32oux72jZ5KZxe9weafqhT1Uo41SIF... receive_mailings: true, timezone_offset: nil, country_code: nil, status_count: 0, deleted_at: nil&amp;gt;]
       actual collection contained:    []
       the missing elements were:      [#&amp;lt;User id: 3, email: "trey@howe.co", encrypted_password: "$2a$04$plCVt32oux72jZ5KZxe9weafqhT1Uo41SIF... receive_mailings: true, timezone_offset: nil, country_code: nil, status_count: 0, deleted_at: nil&amp;gt;]
     # ./spec/jobs/github_commits_job_spec.rb:33:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  3) GithubCommitsJob.job stores correct total commit count for projects
     Failure/Error: expect(project.commit_count).to eq 3116

       expected: 3116
            got: 0

       (compared using ==)
     # ./spec/jobs/github_commits_job_spec.rb:42:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  4) GithubCommitsJob.job stores commit counts only for projects that have a github_url
     Failure/Error: expect(project.commit_counts.count).to eq(1)

       expected: 1
            got: 0

       (compared using ==)
     # ./spec/jobs/github_commits_job_spec.rb:23:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  5) GithubCommitsJob.job stores correct commit counts by user and project
     Failure/Error: expect(CommitCount.find_by!(project: project, user: @users[0]).commit_count).to eq 481

     ActiveRecord::RecordNotFound:
       Couldn't find CommitCount
     # /Users/tansaku/.rvm/gems/ruby-2.3.1/gems/activerecord-4.2.8/lib/active_record/core.rb:196:in `find_by!'
     # ./spec/jobs/github_commits_job_spec.rb:37:in `block (3 levels) in &amp;lt;top (required)&amp;gt;'

  6) GithubLastUpdatesJob#run shf-project with hyphen has correct last commit date after job run
     Failure/Error: expect(project.reload.last_github_update).not_to be_nil

       expected: not nil
            got: nil
     # ./spec/jobs/github_last_updates_job_spec.rb:9:in `block (4 levels) in &amp;lt;top (required)&amp;gt;'

  7) projects/show.html.erb renders a link to the project's github page
     Failure/Error: expect(rendered).to have_link("#{project.github_url.split('/').last}", :href =&amp;gt; project.github_url)

     NoMethodError:
       undefined method `split' for nil:NilClass
     # ./spec/views/projects/show.html.erb_spec.rb:42:in `block (2 levels) in &amp;lt;top (required)&amp;gt;'

  8) projects/edit.html.erb renders project form labels
     Failure/Error: expect(rendered).to have_text('GitHub link')
       expected to find text "GitHub link" in "edit the Title 400 project Title Image url Description Warp fields stabilize. Status Active Closed Pending Add more repos Issue Tracker link Back $(document).on('ready', function(){ $('#source_repositories').on('cocoon:after-insert', function(e, added_repo) { var sourceRepositories = $('#project_form').find('.nested-fields'); var sourceRepositoriesSize = $(sourceRepositories).size(); if (sourceRepositoriesSize &amp;gt; 1) { for(var i = 1; i &amp;lt; sourceRepositoriesSize; i++){ $(sourceRepositories[i]).find('.repo_field_label').html('GitHub url ('+(i+1)+')') } } }); })"
     # ./spec/views/projects/edit.html.erb_spec.rb:16:in `block (2 levels) in &amp;lt;top (required)&amp;gt;'

  9) projects/edit.html.erb renders project form fields
     Failure/Error: expect(rendered).to have_field('GitHub link')
       expected to find field "GitHub link" but there were no matches
     # ./spec/views/projects/edit.html.erb_spec.rb:26:in `block (2 levels) in &amp;lt;top (required)&amp;gt;'

Finished in 1 minute 4.01 seconds (files took 9.28 seconds to load)
940 examples, 9 failures, 2 pending

Failed examples:

rspec ./spec/jobs/github_commits_job_spec.rb:27 # GithubCommitsJob.job stores total commit count only for projects that have a github_url
rspec ./spec/jobs/github_commits_job_spec.rb:32 # GithubCommitsJob.job stores commit counts only for users that have a github_profile_url
rspec ./spec/jobs/github_commits_job_spec.rb:41 # GithubCommitsJob.job stores correct total commit count for projects
rspec ./spec/jobs/github_commits_job_spec.rb:22 # GithubCommitsJob.job stores commit counts only for projects that have a github_url
rspec ./spec/jobs/github_commits_job_spec.rb:36 # GithubCommitsJob.job stores correct commit counts by user and project
rspec ./spec/jobs/github_last_updates_job_spec.rb:7 # GithubLastUpdatesJob#run shf-project with hyphen has correct last commit date after job run
rspec ./spec/views/projects/show.html.erb_spec.rb:39 # projects/show.html.erb renders a link to the project's github page
rspec ./spec/views/projects/edit.html.erb_spec.rb:11 # projects/edit.html.erb renders project form labels
rspec ./spec/views/projects/edit.html.erb_spec.rb:21 # projects/edit.html.erb renders project form fields
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Code relating to checking commits on Github is failing &amp;hellip;, although those can probably be fixed by creating the projects with associated source reposiories, and those view spec failures can probably be addressed by deleting the view specs.  Although I did also need to update this scope on the Project model:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;  &lt;span class="n"&gt;scope&lt;/span&gt; &lt;span class="ss"&gt;:with_github_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;includes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:source_repositories&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;where&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;not&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;source_repositories: &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="ss"&gt;id: &lt;/span&gt;&lt;span class="kp"&gt;nil&lt;/span&gt; &lt;span class="p"&gt;})&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and with that I think I may have gotten all the specs green.  There&amp;rsquo;s still a lot to do, but I&amp;rsquo;m reassured that I&amp;rsquo;m covering the majority of the angles.  I&amp;rsquo;ll push up this code into the PR and tomorrow I can work on cleaning up the domain model, tightening up the unit tests, and maybe even complete the first phase of this feature?  I note also that we have a load of cruft in the spec output - would love to clear that out, but can I prioritise it?&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;Randomized with seed 51520
.....................................................Unused parameters passed to Capybara::Queries::SelectorQuery : ["/users/sign_in"]
Unused parameters passed to Capybara::Queries::SelectorQuery : ["/users/password/new"]
..Unused parameters passed to Capybara::Queries::SelectorQuery : ["/auth/github"]
.............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................DEPRECATION WARNING: You attempted to assign a value which is not explicitly `true` or `false` ("never") to a boolean column. Currently this value casts to `false`. This will change to match Ruby's semantics, and will cast to `true` in Rails 5. If you would like to maintain the current behavior, you should explicitly handle the values you would like cast to `false`. (called from block (3 levels) in &amp;lt;top (required)&amp;gt; at /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/models/event_spec.rb:244)
.DEPRECATION WARNING: You attempted to assign a value which is not explicitly `true` or `false` ("never") to a boolean column. Currently this value casts to `false`. This will change to match Ruby's semantics, and will cast to `true` in Rails 5. If you would like to maintain the current behavior, you should explicitly handle the values you would like cast to `false`. (called from block (3 levels) in &amp;lt;top (required)&amp;gt; at /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/models/event_spec.rb:239)
........DEPRECATION WARNING: You attempted to assign a value which is not explicitly `true` or `false` ("never") to a boolean column. Currently this value casts to `false`. This will change to match Ruby's semantics, and will cast to `true` in Rails 5. If you would like to maintain the current behavior, you should explicitly handle the values you would like cast to `false`. (called from block (3 levels) in &amp;lt;top (required)&amp;gt; at /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/models/event_spec.rb:158)
.DEPRECATION WARNING: You attempted to assign a value which is not explicitly `true` or `false` ("never") to a boolean column. Currently this value casts to `false`. This will change to match Ruby's semantics, and will cast to `true` in Rails 5. If you would like to maintain the current behavior, you should explicitly handle the values you would like cast to `false`. (called from block (3 levels) in &amp;lt;top (required)&amp;gt; at /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/models/event_spec.rb:174)
.DEPRECATION WARNING: You attempted to assign a value which is not explicitly `true` or `false` ("never") to a boolean column. Currently this value casts to `false`. This will change to match Ruby's semantics, and will cast to `true` in Rails 5. If you would like to maintain the current behavior, you should explicitly handle the values you would like cast to `false`. (called from block (3 levels) in &amp;lt;top (required)&amp;gt; at /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/models/event_spec.rb:142)
............................Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/event-131"]
..Unused parameters passed to Capybara::Queries::SelectorQuery : ["/projects/title-240"]
......................................*...............................Unused parameters passed to Capybara::Queries::SelectorQuery : ["/auth/github?origin="]
Unused parameters passed to Capybara::Queries::SelectorQuery : ["/auth/gplus?origin="]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/users/sign_up"]
Unused parameters passed to Capybara::Queries::SelectorQuery : ["/users/password/new"]
..Unused parameters passed to Capybara::Queries::SelectorQuery : ["/auth/github"]
Unused parameters passed to Capybara::Queries::SelectorQuery : ["/auth/gplus"]
......................................WARNING: Using the `raise_error` matcher without providing a specific error or message risks false positives, since `raise_error` will match when Ruby raises a `NoMethodError`, `NameError` or `ArgumentError`, potentially allowing the expectation to pass without even executing the method you are intending to call. Actual error raised was #&amp;lt;ActiveRecord::StatementInvalid: PG::NotNullViolation: ERROR:  null value in column "user_id" violat...
: UPDATE "authentications" SET "user_id" = $1, "updated_at" = $2 WHERE "authentications"."id" = $3&amp;gt;. Instead consider providing a specific error class or message. This message can be suppressed by setting: `RSpec::Expectations.configuration.on_potential_false_positives = :nothing`. Called from /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/models/authentication_spec.rb:12:in `block (2 levels) in &amp;lt;top (required)&amp;gt;'.
.............................*.......WARNING: Using the `raise_error` matcher without providing a specific error or message risks false positives, since `raise_error` will match when Ruby raises a `NoMethodError`, `NameError` or `ArgumentError`, potentially allowing the expectation to pass without even executing the method you are intending to call. Actual error raised was #&amp;lt;ActiveRecord::RecordNotFound: User has not exposed his profile publicly&amp;gt;. Instead consider providing a specific error class or message. This message can be suppressed by setting: `RSpec::Expectations.configuration.on_potential_false_positives = :nothing`. Called from /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/spec/controllers/users_controller_spec.rb:67:in `block (4 levels) in &amp;lt;top (required)&amp;gt;'.
..................................................................Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/1574"]
..Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/1576"]
..Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/1578"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/1579"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/1580"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/code"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/grow"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/learn"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/pair"]
.Unused parameters passed to Capybara::Queries::SelectorQuery : ["/events/1585"]
.......................................................Unused parameters passed to Capybara::Queries::SelectorQuery : ["/sponsors"]
...............................
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;hmmm &amp;hellip;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>AV EcoSystem Review Why is Acceptance Testing so Time Consuming?</title>
    <link rel="alternate" href="http://blog.url.com/2017/09/20/av-ecosystem-review-why-is-acceptance-testing-so-time-consuming/"/>
    <id>http://blog.url.com/2017/09/20/av-ecosystem-review-why-is-acceptance-testing-so-time-consuming/</id>
    <published>2017-09-20T01:00:00+01:00</published>
    <updated>2017-11-20T20:13:35+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;img alt="acceptance testing" src="/images/acceptance_testing.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;I think I&amp;rsquo;m almost there with acceptance testing this multiple repo feature, but it makes me wonder why acceptance testing always seems to be so time consuming.  I&amp;rsquo;m just wrapping up a private project where acceptance testing of electron apps was a real pain, and I really question if it was time well spent since the resulting acceptance tests are slow and unreliable.  Perhaps all that time would have been better spent on unit tests and getting a really coherent domain model sorted out.  The acceptance testing framework I&amp;rsquo;m using for Rails is a bit more stable, although it&amp;rsquo;s all a matter of degree; and already I&amp;rsquo;ve spent more time on the acceptance testing than on the feature itself for the multiple repo feature.  Although in the process I&amp;rsquo;ve learnt more precisely about the way the feature works and the nuances of the Cocoon gem.  Anyway, to attempt to wrap that up I&amp;rsquo;m going to try and get the dynamic repo form fields to be labelled numerically to make the acceptance testing easier, and try and avoid some of the issues brought up in this SO post:&lt;/p&gt;

&lt;p&gt;&lt;a href="https://stackoverflow.com/questions/23184690/testing-fields-added-dynamically-by-cocoon-using-rspec-and-capybara"&gt;https://stackoverflow.com/questions/23184690/testing-fields-added-dynamically-by-cocoon-using-rspec-and-capybara&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I modified the code from &lt;a href="https://github.com/nathanvda/cocoon/issues/374"&gt;https://github.com/nathanvda/cocoon/issues/374&lt;/a&gt; like so:&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'ready'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
    &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'#source_repositories'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'cocoon:after-insert'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;added_repo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;sourceRepositories&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'#project_form'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.nested-fields'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;sourceRepositoriesSize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;sourceRepositories&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;size&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

      &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;sourceRepositories&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.repo_field_label'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;html&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'GitHub url (primary)'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;sourceRepositoriesSize&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nx"&gt;sourceRepositoriesSize&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
          &lt;span class="nx"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;sourceRepositories&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;&lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'.repo_field_label'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;html&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;`GitHub url (&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;with the idea to adjust the label names dynamically, but in the first instance the script didn&amp;rsquo;t seem to run at all - I set a breakpoint in the chrome debugger, and loading the page didn&amp;rsquo;t stop there, making me think something wasn&amp;rsquo;t hooked up properly.  At least I thought that for a moment, and then I re-ran and it seemed like it did hook up. Hmm.  Well that gives me what I was hoping for:&lt;/p&gt;

&lt;p&gt;&lt;img src="https://dl.dropbox.com/s/404eit68ham28ow/Screenshot%202017-09-20%2009.35.59.png" /&gt;&lt;/p&gt;

&lt;p&gt;I then spent 15 minutes trying to refactor to use &lt;code&gt;forEach&lt;/code&gt; or &lt;code&gt;for ... in&lt;/code&gt; all to no avail as the jQuery is returning an object with numeric keys rather than an array, and there are other enumerable properties on the object, so let&amp;rsquo;s see if the acceptance test can distinguish these form fields &amp;hellip; and no. Clicking on the &amp;ldquo;add more repos&amp;rdquo; link in the test does not appear to be generating the additional repo text field.  And maybe I never had that working in the test.  I worked out how to display an initial default field, but that doesn&amp;rsquo;t require any JavaScript.   Ugh, I&amp;rsquo;m really regretting the time I just spent failing to refactor the JavaScript.  It feels like the JavaScript is just not even running for this test.&lt;/p&gt;

&lt;p&gt;So now I feel stuck.  The functionality is working beautifully in the browser as I test it manually, but not in the test.  I have the @javascript tag on this test - other javascript tests run.  What I&amp;rsquo;m unclear about here is how can I go about checking that JavaScript is actually working in the test.  Looking at our hook definitions I see the following:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="no"&gt;After&lt;/span&gt; &lt;span class="s1"&gt;'@javascript'&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
  &lt;span class="no"&gt;Capybara&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'session_pool'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="k"&gt;next&lt;/span&gt; &lt;span class="k"&gt;unless&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;is_a?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;Capybara&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Poltergeist&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Driver&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;restart&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;According to the &lt;a href="https://github.com/teamcapybara/capybara#using-capybara-with-cucumber"&gt;Capybara docs&lt;/a&gt; simply tagging with &lt;code&gt;@javascript&lt;/code&gt; should be sufficient &amp;hellip; and when I hook on the debugger I can see that Capybara is using the expected poltergeist&lt;em&gt;billy javascript&lt;/em&gt;driver:&lt;/p&gt;
&lt;pre class="highlight shell"&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;tansaku@Samuels-MBP:~/Documents/Github/AgileVentures/WebsiteOne &lt;span class="o"&gt;(&lt;/span&gt;761_multiple_source_repository&lt;span class="o"&gt;)]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;
→ be cucumber features/projects/create_projects.feature:63

&lt;span class="o"&gt;[&lt;/span&gt;Coveralls] Using SimpleCov&lt;span class="s1"&gt;'s '&lt;/span&gt;rails&lt;span class="s1"&gt;' settings.
Using the default profile...
@vcr
Feature: Create projects
  As a member of AgileVentures
  So that I can create a focal point for an AgileVentures project
  I would like to create a new project profile

  @javascript
  Scenario: Saving a new project with multiple repositories: success       # features/projects/create_projects.feature:64
    Given I am logged in                                                   # features/step_definitions/user_steps.rb:63
    And I am on the "Projects" page                                        # features/step_definitions/basic_steps.rb:84
    When I click the very stylish "New Project" button                     # features/step_definitions/basic_steps.rb:291
    When I fill in "Title" with "multiple repo project"                    # features/step_definitions/basic_steps.rb:140
    And I fill in "Description" with "has lots of code"                    # features/step_definitions/basic_steps.rb:140
    And I fill in "GitHub url (primary)" with "http://www.github.com/new"  # features/step_definitions/basic_steps.rb:140
    And I click "Add more repos"                                           # features/step_definitions/basic_steps.rb:88
Return value is: nil

[390, 399] in /Users/tansaku/Documents/GitHub/AgileVentures/WebsiteOne/features/step_definitions/basic_steps.rb
   390: end
   391: 
   392: 
   393: And(/^I debug$/) do
   394:   byebug
=&amp;gt; 395: end
   396: 
   397: 
   398: And(/^the window size is wide$/) do
   399:   Capybara.page.current_window.resize_to(1300,400)
(byebug) 
(byebug) Capybara.current_driver
:poltergeist_billy
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I dug through the documentation and found various things of interest:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="#"&gt;https://github.com/teamcapybara/capybara#asynchronous-javascript-ajax-and-friends&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="http://www.jonathanleighton.com/articles/2012/poltergeist-0-6-0/"&gt;http://www.jonathanleighton.com/articles/2012/poltergeist-0-6-0/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://github.com/teampoltergeist/poltergeist/issues/755"&gt;https://github.com/teampoltergeist/poltergeist/issues/755&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://github.com/thoughtbot/capybara-webkit#configuration"&gt;https://github.com/thoughtbot/capybara-webkit#configuration&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://github.com/teampoltergeist/poltergeist#remote-debugging-experimental"&gt;https://github.com/teampoltergeist/poltergeist#remote-debugging-experimental&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;and the upshot of all this and some other hacking is that I now have remote debugging setup, which makes it look like JavaScript is running, in as much as the second field has been generated, but that it hasn&amp;rsquo;t been renamed by the embedded script:&lt;/p&gt;

&lt;p&gt;&lt;img src="https://dl.dropbox.com/s/n2m1i3skeu12szp/Screenshot%202017-09-20%2010.25.54.png" /&gt;&lt;/p&gt;

&lt;p&gt;So I&amp;rsquo;m guessing I need to move this code to somewhere it might more reliably be run.  It clearly runs in the browser - ah, it looks like the ES6 interpolation I used might not be working &amp;hellip; yes, that was it - okay - this is a great step forward;  being able to see JS errors in capybara tests, yay!&lt;/p&gt;

&lt;p&gt;And so now the interactive parts of the test passed, and I am onto errors that are all about me making sure that the data has been stored and updated correctly.  Tomorrow&amp;rsquo;s work is clear &amp;hellip;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>AV EcoSystem Review Gem Polishing</title>
    <link rel="alternate" href="http://blog.url.com/2017/09/19/av-ecosystem-review-gem-polishing/"/>
    <id>http://blog.url.com/2017/09/19/av-ecosystem-review-gem-polishing/</id>
    <published>2017-09-19T01:00:00+01:00</published>
    <updated>2017-11-16T20:56:37+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;img alt="diamond polisher" src="/images/diamond_polisher.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;So I&amp;rsquo;m on the train into london for a meeting with the NHS, but unlike in my last year of blogging it&amp;rsquo;s not time to agonize about how everything&amp;rsquo;s going, but time to focus on finishing up this feature for multiple project repositories.  Yesterday I checked that I could get the basic functionality that we need using the &lt;a href="https://github.com/nathanvda/cocoon"&gt;Cocoon gem&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Now I need to hook it up to the acceptance tests, consider whether we need unit tests, and work on the styling of the form.  A bit of kicking around with CSS and I got it to look like this:&lt;/p&gt;

&lt;p&gt;&lt;img src="https://dl.dropbox.com/s/ye8fwrjwksuntil/Screenshot%202017-09-19%2009.41.43.png?dl=0" /&gt;&lt;/p&gt;

&lt;p&gt;Now to get the acceptance test working the first issue I have is that I&amp;rsquo;ve removed the field that we used to use for adding GitHub links, so the test fails to find it, and still fails to find it even after I rename the field &amp;hellip;&lt;/p&gt;
&lt;pre class="highlight shell"&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;tansaku@Samuels-MBP:~/Documents/Github/AgileVentures/WebsiteOne &lt;span class="o"&gt;(&lt;/span&gt;761_multiple_source_repository&lt;span class="o"&gt;)]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;
→ be cucumber features/projects/create_projects.feature:64
&lt;span class="o"&gt;[&lt;/span&gt;Coveralls] Using SimpleCov&lt;span class="s1"&gt;'s '&lt;/span&gt;rails&lt;span class="s1"&gt;' settings.
Using the default profile...
@vcr
Feature: Create projects
  As a member of AgileVentures
  So that I can create a focal point for an AgileVentures project
  I would like to create a new project profile

  @javascript
  Scenario: Saving a new project with multiple repositories: success       # features/projects/create_projects.feature:64
    Given I am logged in                                                   # features/step_definitions/user_steps.rb:63
    And I am on the "Projects" page                                        # features/step_definitions/basic_steps.rb:84
    When I click the very stylish "New Project" button                     # features/step_definitions/basic_steps.rb:291
    When I fill in "Title" with "multiple repo project"                    # features/step_definitions/basic_steps.rb:140
    And I fill in "Description" with "has lots of code"                    # features/step_definitions/basic_steps.rb:140
    And I fill in "GitHub link" with "http://www.github.com/new"           # features/step_definitions/basic_steps.rb:140
      Unable to find field "GitHub link" (Capybara::ElementNotFound)
      ./features/step_definitions/basic_steps.rb:141:in `/^I fill in "([^"]*)" with "([^"]*)"$/'&lt;/span&gt;
      features/projects/create_projects.feature:70:in &lt;span class="sb"&gt;`&lt;/span&gt;And I fill &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="s2"&gt;"GitHub link"&lt;/span&gt; with &lt;span class="s2"&gt;"http://www.github.com/new"&lt;/span&gt;&lt;span class="s1"&gt;'
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The actual name of the field is now:&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;project[source_repositories_attributes][0][url]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Strangely despite having capitalized the H in GitHub, the label is rendered in the page as follows:&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;label&lt;/span&gt; &lt;span class="na"&gt;for=&lt;/span&gt;&lt;span class="s"&gt;"project_source_repositories_attributes_0_GitHub Link"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Github link&lt;span class="nt"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;that&amp;rsquo;s from:&lt;/p&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;'nested-fields form-group'&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;'field form-group'&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;label&lt;/span&gt; &lt;span class="s1"&gt;'GitHub Link'&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;text_field&lt;/span&gt; &lt;span class="ss"&gt;:url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;placeholder: &lt;/span&gt;&lt;span class="s1"&gt;'https://github.com/projectname'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;class: &lt;/span&gt;&lt;span class="s1"&gt;'form-control input-lg'&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;link_to_remove_association&lt;/span&gt; &lt;span class="s1"&gt;'Delete repo'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;class: &lt;/span&gt;&lt;span class="s1"&gt;'btn btn-danger'&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For some reason it&amp;rsquo;s being downcased? Well I&amp;rsquo;ll just go with the downcase then.  Hmm, I guess I&amp;rsquo;m restricted as to how I use the label method on the Rails form.  I thought I could just replace &lt;code&gt;:url&lt;/code&gt; with the text that I wanted, but no go.  I switch back to url and try to fill in the field &amp;ldquo;Url&amp;rdquo;, but no and also no joy for &lt;code&gt;project[source_repositories_attributes][0][url]&lt;/code&gt; or &lt;code&gt;project_source_repositories_attributes_0_url&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What I can see when I debug and inspect the HTML that capybara is seeing is that even though I have JavaScript enabled, it does not seem like the dynamic form fields are being created.  Instead I see this:&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;\"links&lt;/span&gt; &lt;span class="na"&gt;form-group&lt;/span&gt;&lt;span class="err"&gt;\"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

  &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;\"btn&lt;/span&gt; &lt;span class="na"&gt;btn-default&lt;/span&gt; &lt;span class="na"&gt;add_fields&lt;/span&gt;&lt;span class="err"&gt;\"&lt;/span&gt; &lt;span class="na"&gt;data-association=&lt;/span&gt;&lt;span class="s"&gt;\"source_repository\"&lt;/span&gt; &lt;span class="na"&gt;data-associations=&lt;/span&gt;&lt;span class="s"&gt;\"source_repositories\"&lt;/span&gt; &lt;span class="na"&gt;data-association-insertion-template=&lt;/span&gt;&lt;span class="s"&gt;\"&amp;amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;'nested-fields form-group'&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;
    &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;&lt;span class="na"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;'field form-group'&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;
      &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;&lt;span class="na"&gt;label&lt;/span&gt; &lt;span class="na"&gt;title=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;GitHub&lt;/span&gt; &lt;span class="na"&gt;url&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;quot&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt; &lt;span class="na"&gt;for=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;project_source_repositories_attributes_new_source_repositories_url&amp;amp;quot;&amp;amp;gt;Url&amp;amp;lt;/label&amp;amp;gt;&lt;/span&gt;
      &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;&lt;span class="na"&gt;input&lt;/span&gt; &lt;span class="na"&gt;placeholder=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;https://github.com/projectname&amp;amp;quot;&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;form-control&lt;/span&gt; &lt;span class="na"&gt;input-lg&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;quot&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;text&amp;amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;project[source_repositories_attributes][new_source_repositories][url]&amp;amp;quot;&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;project_source_repositories_attributes_new_source_repositories_url&amp;amp;quot;&lt;/span&gt; &lt;span class="err"&gt;/&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;
    &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;/&lt;/span&gt;&lt;span class="na"&gt;div&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;
    &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;&lt;span class="na"&gt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;hidden&amp;amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;project[source_repositories_attributes][new_source_repositories][_destroy]&amp;amp;quot;&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;project_source_repositories_attributes_new_source_repositories__destroy&amp;amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;false&amp;amp;quot;&lt;/span&gt; &lt;span class="err"&gt;/&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;&lt;span class="na"&gt;a&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;btn&lt;/span&gt; &lt;span class="na"&gt;btn-danger&lt;/span&gt; &lt;span class="na"&gt;remove_fields&lt;/span&gt; &lt;span class="na"&gt;dynamic&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;quot&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;amp;quot;#&amp;amp;quot;&amp;amp;gt;Delete&lt;/span&gt; &lt;span class="na"&gt;repo&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;/&lt;/span&gt;&lt;span class="na"&gt;a&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;
  &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;lt&lt;/span&gt;&lt;span class="err"&gt;;/&lt;/span&gt;&lt;span class="na"&gt;div&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="na"&gt;gt&lt;/span&gt;&lt;span class="err"&gt;;\"&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;\"#\"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;Add more repos&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;which looks like the raw HTML that Cocoon delivers before JavaScript adjusts it.  I wonder if that&amp;rsquo;s because I&amp;rsquo;m doing this on the train without internet connection (and that&amp;rsquo;s affecting loading some needed js); but I can see the Cocoon js being loaded in chrome when I test manually &amp;hellip; ah, I think I see the problem.  The project doesn&amp;rsquo;t have a default first repo - we have to click &amp;lsquo;Add repos&amp;rsquo; once first &amp;hellip; or we can build one by default:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;new&lt;/span&gt;
    &lt;span class="vi"&gt;@project&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;
    &lt;span class="vi"&gt;@project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;source_repositories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;build&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and leaves me wondering if there is some way to have the different fields be numbered 1, 2, 3 etc. That would make the Cucumber/Capybara testing easier and it looks like there might be an approach that does that here:&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/nathanvda/cocoon/issues/374"&gt;https://github.com/nathanvda/cocoon/issues/374&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Perhaps I can use that to fix this tomorrow &amp;hellip;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>AV EcoSystem Review Inspecting Gems</title>
    <link rel="alternate" href="http://blog.url.com/2017/09/18/av-ecosystem-review-inspecting-gems/"/>
    <id>http://blog.url.com/2017/09/18/av-ecosystem-review-inspecting-gems/</id>
    <published>2017-09-18T01:00:00+01:00</published>
    <updated>2017-11-15T20:44:59+00:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;img alt="gems" src="/images/gems.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;So my AV ecosystem reviews are getting further afield.  Here I am inspecting different gems for the purpose of completing a feature to support multiple project repositories.  What are the goals of this ongoing review? It&amp;rsquo;s to focus my blogging power onto making the AV ecosystem as welcoming and easy to use as possible.  That&amp;rsquo;s the flow of people from external sources to our website, to our Slack instance and to contributing to the projects we have hosted on GitHub.  This feature is a response to a request from a project maintainer, and that&amp;rsquo;s a stakeholder that we might have overlooked, so I&amp;rsquo;ll see what giving them focus can do.&lt;/p&gt;

&lt;p&gt;Last Friday after spiking an interface component for dynamic form fields in rails, I found some gems that might provide a more coherent approach.  &lt;a href="https://github.com/ncri/nested_form_fields"&gt;https://github.com/ncri/nested&lt;em&gt;form&lt;/em&gt;fields&lt;/a&gt; is my current lead candidate.  243 stars suggests it has some popularity and I can see that it was updated as recently as five days ago.  There&amp;rsquo;s also &lt;a href="https://github.com/ryanb/nested_form"&gt;https://github.com/ryanb/nested_form&lt;/a&gt; with 1,769 stars, but hasn&amp;rsquo;t been updated in 4 years.  Another &lt;a href="https://www.google.co.uk/search?q=gems+rails+nested+form"&gt;quick search&lt;/a&gt; shows me there&amp;rsquo;s also &lt;a href="https://github.com/nathanvda/cocoon"&gt;https://github.com/nathanvda/cocoon&lt;/a&gt; with 2,445 stars and was updated as recently as 3 days ago.  Glad I did that search, or I might not have found this other important contender which looks like the field leader at the moment.  Let&amp;rsquo;s try it out - following the README instructions on how to install &amp;hellip;&lt;/p&gt;

&lt;p&gt;Using Cocoon requires the nested models that we haven&amp;rsquo;t set up yet, and then has options for using Rails Formtastic, SimpleForm or Standard Rails forms.  I&amp;rsquo;m tempted to go for standard Rails forms, since I don&amp;rsquo;t want to take on too much at once.  I&amp;rsquo;ll start with the migration, I guess, to pull the github_url out of the project and into a separate table &amp;hellip;&lt;/p&gt;
&lt;pre class="highlight shell"&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;tansaku@Samuels-MBP:~/Documents/Github/AgileVentures/WebsiteOne &lt;span class="o"&gt;(&lt;/span&gt;761_multiple_source_repository&lt;span class="o"&gt;)]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;
→ rails g model SourceRepository url:string
      invoke  active_record
      create    db/migrate/20170918083218_create_source_repositories.rb
      create    app/models/source_repository.rb
      invoke    rspec
      create      spec/models/source_repository_spec.rb
      invoke      factory_girl
      create        spec/factories/source_repositories.rb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I can then edit the created model to have the setup that Cocoon requires:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SourceRepository&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;
  &lt;span class="n"&gt;belongs_to&lt;/span&gt; &lt;span class="ss"&gt;:project&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and refer to it in the existing Project class:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Project&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

  &lt;span class="nf"&gt;has_many&lt;/span&gt; &lt;span class="ss"&gt;:source_repositories&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inverse_of&lt;/span&gt; &lt;span class="ss"&gt;:project&lt;/span&gt;
  &lt;span class="n"&gt;accepts_nested_attributes_for&lt;/span&gt; &lt;span class="ss"&gt;:source_repositories&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;reject_if: :all_blank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;allow_destroy: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Using an online HAML to ERB converter I can get the project example forms in ERB, and adjust to our needs:&lt;/p&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;form_for&lt;/span&gt; &lt;span class="vi"&gt;@project&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"field"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;label&lt;/span&gt; &lt;span class="ss"&gt;:name&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;br/&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;text_field&lt;/span&gt; &lt;span class="ss"&gt;:name&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"field"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;label&lt;/span&gt; &lt;span class="ss"&gt;:description&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;br/&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;text_field&lt;/span&gt; &lt;span class="ss"&gt;:description&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;h3&amp;gt;&lt;/span&gt;Source Repositories&lt;span class="nt"&gt;&amp;lt;/h3&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;"source_repositories"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;fields_for&lt;/span&gt; &lt;span class="ss"&gt;:source_repositories&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;source_repository&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
      &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt; &lt;span class="s1"&gt;'source_repository_fields'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;f: &lt;/span&gt;&lt;span class="n"&gt;source_repository&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"links"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;link_to_add_association&lt;/span&gt; &lt;span class="s1"&gt;'add source_repository'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:source_repositories&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;submit&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and the partial:&lt;/p&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"nested-fields"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;div&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"field"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;label&lt;/span&gt; &lt;span class="ss"&gt;:url&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;br/&amp;gt;&lt;/span&gt;
    &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;text_field&lt;/span&gt; &lt;span class="ss"&gt;:url&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;link_to_remove_association&lt;/span&gt; &lt;span class="s2"&gt;"remove source repository"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and after a few misteps back and forth to add the correct references to the model/migration:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;CreateSourceRepositories&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Migration&lt;/span&gt;
  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;change&lt;/span&gt;
    &lt;span class="n"&gt;create_table&lt;/span&gt; &lt;span class="ss"&gt;:source_repositories&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
      &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;string&lt;/span&gt; &lt;span class="ss"&gt;:url&lt;/span&gt;
      &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;string&lt;/span&gt; &lt;span class="ss"&gt;:url&lt;/span&gt;
      &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;references&lt;/span&gt; &lt;span class="ss"&gt;:project&lt;/span&gt; &lt;span class="c1"&gt;# &amp;lt;-- needed this&lt;/span&gt;

      &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;timestamps&lt;/span&gt; &lt;span class="ss"&gt;null: &lt;/span&gt;&lt;span class="kp"&gt;false&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I was rewarded with seeing the boiler plate form allowing me to both add and remove source repositories:&lt;/p&gt;

&lt;p&gt;&lt;img src="https://dl.dropbox.com/s/vy7u9shkciiljc7/Screenshot%202017-09-18%2009.53.22.png?dl=1" /&gt;&lt;/p&gt;

&lt;p&gt;Hopefully a bit of cleanup and formatting and this will look nice and have more functionality that I was able to immediately hand-roll.  I could probably have implemented dynamic removal of form fields in the same time it took me to get proof of concept on this gem.  However using this gem will hopefully make our system less suprising to new developers who might have seen this gem on other projects, and we&amp;rsquo;ll potentially get the benefits of upgrades and fixes to the gem itself.&lt;/p&gt;

&lt;p&gt;Of course, despite getting the interface working, the repository datat that I inputted was not actually saved to the database as such, but then I hadn&amp;rsquo;t got that part working in my own hand-rolled version either :-)&lt;/p&gt;

&lt;p&gt;I can see the data being passed back:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;Started POST "/projects" for ::1 at 2017-09-18 08:56:32 +0000
Processing by ProjectsController#create as HTML
  Parameters: {"utf8"=&amp;gt;"✓", "authenticity_token"=&amp;gt;"0/yym9qPkJcAgoxhJqfg2UIOfDEFIDda2qW2VWZCVl2AF0/fytCniCb8bJb/qy1ZV0f/CXYDc9mvGBElB51A4g==", "project"=&amp;gt;{"title"=&amp;gt;"test", "image_url"=&amp;gt;"", "description"=&amp;gt;"test", "status"=&amp;gt;"Active", "github_url"=&amp;gt;"", "source_repositories_attributes"=&amp;gt;{"1505724773160"=&amp;gt;{"url"=&amp;gt;"test", "_destroy"=&amp;gt;"false"}, "1505724775431"=&amp;gt;{"url"=&amp;gt;"test2", "_destroy"=&amp;gt;"false"}, "1505724776802"=&amp;gt;{"url"=&amp;gt;"test3", "_destroy"=&amp;gt;"false"}}, "pivotaltracker_url"=&amp;gt;""}, "commit"=&amp;gt;"Submit"}
  User Load (0.6ms)  SELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 3]]
  Event Load (1.5ms)  SELECT "events".* FROM "events" WHERE "events"."category" = $1  [["category", "Scrum"]]
Unpermitted parameter: source_repositories_attributes
   (0.2ms)  BEGIN
  Project Exists (2.8ms)  SELECT  1 AS one FROM "projects" WHERE ("projects"."id" IS NOT NULL) AND "projects"."slug" = 'test' LIMIT 1
  SQL (4.6ms)  INSERT INTO "projects" ("title", "description", "status", "github_url", "pivotaltracker_url", "image_url", "user_id", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["title", "test"], ["description", "test"], ["status", "Active"], ["github_url", ""], ["pivotaltracker_url", ""], ["image_url", ""], ["user_id", 3], ["slug", "test-8018e213-701c-40bd-aa02-caa3025ae4ba"], ["created_at", "2017-09-18 08:56:33.028974"], ["updated_at", "2017-09-18 08:56:33.028974"]]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I was about to say that I&amp;rsquo;d leave fixing that till tommorrow, but I had a quick idea it was to do with strong parameters, and it was:&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;project_params&lt;/span&gt;
    &lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:project&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;permit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:description&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:pitch&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:created&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:status&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:github_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:pivotaltracker_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:pivotaltracker_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:image_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;source_repositories_attributes: &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:url&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We need to specify the nested required attributes.  We are now saving our new repo information to the database thanks to &lt;a href="https://stackoverflow.com/questions/15919761/rails-4-nested-attributes-unpermitted-parameters"&gt;Stack Overflow&lt;/a&gt;!&lt;/p&gt;
</content>
  </entry>
</feed>
